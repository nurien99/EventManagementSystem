@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Components.Authorization
@namespace EventManagementSystem.BlazorApp.Components.Layout
@inherits LayoutComponentBase
@inject AuthenticationStateProvider AuthenticationStateProvider

<CascadingAuthenticationState>
    <AuthorizeView>
        <NotAuthorized>
            <!-- Login-specific Public Layout (Simplified Header) -->
            <div class="public-layout">
                <!-- Top Navigation Bar (Login - Simplified) -->
                <nav class="navbar navbar-expand-lg top-navbar">
                    <div class="container-fluid">
                        <!-- Brand Only -->
                        <a class="navbar-brand" href="/">
                            <i class="bi bi-calendar-check me-2"></i>
                            Event Management System
                        </a>
                    </div>
                </nav>

                <!-- Main Content (Full Width) -->
                <main class="public-main">
                    <div class="content">
                        @Body
                    </div>
                </main>
            </div>
        </NotAuthorized>
        <Authorized>
            <!-- If somehow accessed while authenticated, redirect to dashboard -->
            @{
                Navigation.NavigateTo("/dashboard");
            }
        </Authorized>
    </AuthorizeView>
</CascadingAuthenticationState>

<div id="blazor-error-ui">
    <environment include="Staging,Production">
        An error has occurred. This application may no longer respond until reloaded.
    </environment>
    <environment include="Development">
        An unhandled exception has occurred. See browser dev tools for details.
    </environment>
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>

@code {
    // TODO: Replace with actual authentication service injection
    [Inject] private NavigationManager Navigation { get; set; } = default!;
}